CREATE TABLE CLIENTE(
ID_CLIENTE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
NOME VARCHAR(30) NOT NULL,
COGNOME VARCHAR(30) NOT NULL,
EMAIL VARCHAR(30) NOT NULL,
DOCUMENTO VARCHAR(9) NOT NULL,
TELEFONO VARCHAR(10) NOT NULL,
RESIDENZA VARCHAR(30) NOT NULL
);

CREATE TABLE PRENOTAZIONE(
NUM_PRENOTAZIONE INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
DATA DATE DEFAULT CURRENT_DATE,
ESITO VARCHAR(20) DEFAULT 'IN_ATTESA',
PAGATO BOOL DEFAULT FALSE,
ANDAMENTO VARCHAR(20) DEFAULT 'IN_ATTESA',
ID_CLIENTE INT NOT NULL,
FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
CHECK ESITO IN ('IN_ATTESA', 'CONFERMATO', 'RIFIUTATO'),
CHECK ANDAMENTO IN ('IN_ATTESA', 'CONSEGNATO', 'RESTITUITO')
);

CREATE TABLE ASSOCIAZIONE(
NUM_PRENOTAZIONE INT,
ID_ATTREZZATURA INT,
FOREIGN KEY (NUM_PRENOTAZIONE) REFERENCES PRENOTAZIONE(NUM_PRENOTAZIONE),
FOREIGN KEY (ID_ATTREZZATURA) REFERENCES ATTREZZATURA(ID_ATTREZZATURA)
);

CREATE TABLE ATTREZZATURA(
ID_ATTREZZATURA INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
CATEGORIA VARCHAR(20),
PREZZO FLOAT,
STATO VARCHAR(20) DEFAULT = 'DISPONIBILE',
LUNGHEZZA FLOAT DEFAULT = NULL,
LIVELLO VARCHAR(20) DEFAULT = NULL,
DIMENSIONE VARCHAR(10) DEFAULT = NULL,
TAGLIA VARCHAR(2) DEFAULT = NULL,
MISURA INT DEFAULT = NULL,
CHECK STATO IN ('DISPONIBILE', 'NOLEGGIATO', 'GUASTO'),
CHECK LIVELLO IN ('BASE', 'MEDIO', 'AVANZATO'),
CHECK DIMENSIONE IN ('CORTO', 'MEDIO', 'LUNGO'), 
CHECK TAGLIA IN ('M', 'L', 'XL')
);

CREATE TABLE REPORT(
ID_REPORT INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
DATA DATE DEFAULT CURRENT_DATE,
NUM_PRENOTAZIONE INT,
NOME_CLIENTE VARCHAR(30),
COGNOME_CLIENTE VARCHAR(30),
EMAIL_CLIENTE VARCHAR(30),
TELEFONO_CLIENTE VARCHAR(10),
FOREIGN KEY (NUM_PRENOTAZIONE) REFERENCES PRENOTAZIONE(NUM_PRENOTAZIONE)
);

-------------------------------------------------------------------------------

INSERT INTO ATTREZZATURA VALUES (NULL, "Sci", 10.0), (NULL, "Snowboard", 20.0), (NULL, "Sci", 10.0);
INSERT INTO ATTREZZATURA VALUES (NULL, "Scarponi", 7.0), (NULL, "Bastoncini", 6.0);
INSERT INTO CLIENTE VALUES (NULL, "Mario", "Rossi", "mariorossi@mail.com", "MI000", "3316965091", "Milano");  
INSERT INTO CLIENTE VALUES (NULL, "Antonio", "Esposito", "antonioesposito@mail.com", "NA010", "3316875091", "Napoli");  
INSERT INTO PRENOTAZIONE (ID_CLIENTE)  VALUES (SELECT ID_CLIENTE FROM CLIENTE WHERE DOCUMENTO = "MI000");
INSERT INTO PRENOTAZIONE (ID_CLIENTE)  VALUES (SELECT ID_CLIENTE FROM CLIENTE WHERE DOCUMENTO = "NA010");


